## Гайд по использованию модуля `Logger`

### 1. Введение

Модуль `Logger` предназначен для ведения логов в приложениях на языке Pascal. Он поддерживает несколько уровней логирования, позволяет записывать сообщения в файл и дублировать их в консоль с возможностью выделения цветом. Модуль также предоставляет гибкие настройки для управления выводом в консоль.

### 2. Основные возможности

- **Уровни логирования**: Поддерживаются четыре уровня логирования:
  - `DEBUG`: Для отладочной информации.
  - `INFO`: Для информационных сообщений.
  - `WARNING`: Для предупреждений.
  - `ERROR`: Для сообщений об ошибках.

- **Запись в файл**: Все сообщения логируются в указанный файл. По умолчанию это `app.log`.

- **Вывод в консоль**: Сообщения могут дублироваться в консоль с возможностью выделения цветом для каждого уровня логирования.

- **Динамическое управление выводом в консоль**: Вы можете включать и выключать вывод в консоль в процессе работы приложения.

- **Глобальный экземпляр**: Модуль предоставляет глобальную переменную `gLog` для удобного доступа к логгеру из любой части приложения.

### 3. Установка и настройка

1. **Подключение модуля**:
   - Добавьте модуль `Logger` в секцию `uses` вашего модуля или программы.

   ```pascal
   uses
     Logger;
   ```

2. **Инициализация**:
   - Модуль автоматически инициализирует глобальный экземпляр логгера при запуске приложения. Вы можете использовать `gLog` для логирования без необходимости создания дополнительных экземпляров.

3. **Настройка**:
   - По умолчанию вывод в консоль включен. Если вы хотите отключить его, используйте метод `SetConsoleOutput`.

   ```pascal
   gLog.SetConsoleOutput(False);
   ```

   - Чтобы включить вывод в консоль, используйте:

   ```pascal
   gLog.SetConsoleOutput(True);
   ```

### 4. Использование

#### 4.1. Логирование сообщений

Вы можете использовать различные методы для логирования сообщений в зависимости от уровня логирования:

- **DEBUG**:

  ```pascal
  gLog.Debug('Это сообщение для отладки');
  gLog.Debug('Значение переменной x: %d', [x]);
  ```

- **INFO**:

  ```pascal
  gLog.Info('Это информационное сообщение');
  gLog.Info('Пользователь %s вошел в систему', ['Имя']);
  ```

- **WARNING**:

  ```pascal
  gLog.Warning('Это предупреждение');
  gLog.Warning('Недостаточно памяти для выполнения операции');
  ```

- **ERROR**:

  ```pascal
  gLog.Error('Это сообщение об ошибке');
  gLog.Error('Ошибка при открытии файла: %s', ['file.txt']);
  ```

#### 4.2. Очистка логов

Чтобы очистить файл логов, используйте метод `Clear`:

```pascal
gLog.Clear;
```

#### 4.3. Пример использования

```pascal
program Example;
uses
  Logger,
  System.SysUtils;

begin
  // Логирование сообщений
  gLog.Debug('Запуск приложения');
  gLog.Info('Пользователь вошел в систему');
  gLog.Warning('Недостаточно памяти');
  gLog.Error('Ошибка при чтении файла');

  // Отключение вывода в консоль
  gLog.SetConsoleOutput(False);

  // Логирование без вывода в консоль
  gLog.Info('Это сообщение не будет отображаться в консоли');

  // Включение вывода в консоль
  gLog.SetConsoleOutput(True);

  // Логирование с выводом в консоль
  gLog.Debug('Отладка завершена');

  // Очистка логов
  gLog.Clear;

  // Завершение программы
  Writeln('Программа завершена');
end.
```

### 5. Настройка цветов в консоли

Цвета для каждого уровня логирования настраиваются в методе `SetConsoleColor`. Вы можете изменить цвета, изменив значения в массиве `Colors`:

```pascal
procedure TLogger.SetConsoleColor(const Level: TLogLevel);
const
  Colors: array[TLogLevel] of WORD = (
    FOREGROUND_BLUE or FOREGROUND_GREEN, // llDebug - Cyan
    FOREGROUND_GREEN, // llInfo - Green
    FOREGROUND_RED or FOREGROUND_GREEN, // llWarning - Yellow
    FOREGROUND_RED); // llError - Red
begin
  SetConsoleTextAttribute(GetStdHandle(STD_OUTPUT_HANDLE), Colors[Level]);
end;
```

Например, чтобы изменить цвет для уровня `llInfo` на синий, измените соответствующую строку:

```pascal
FOREGROUND_BLUE, // llInfo - Blue
```

### 6. Заключение

Модуль `Logger` предоставляет мощный и гибкий инструмент для ведения логов в ваших приложениях. Благодаря поддержке различных уровней логирования, вы можете легко управлять объемом и типом информации, которую вы хотите записывать. Возможность выделения цветом в консоли делает логи более наглядными и удобными для анализа.
